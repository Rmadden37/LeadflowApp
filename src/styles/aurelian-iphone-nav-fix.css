/* ===================================================================
   AURELIAN'S IPHONE NAVIGATION FIX WITH SUBTLE GLASSMORPHISM
   Fixes positioning and adds iOS 17+ glass effects
   =================================================================== */

/* iPhone-specific safe area fix */
@supports (-webkit-touch-callout: none) {
  .bottom-nav-container,
  nav[class*="bottom"],
  [data-testid="bottom-navigation"] {
    /* ULTRA-AGGRESSIVE: Position WAY above iPhone home indicator */
    bottom: calc(env(safe-area-inset-bottom, 0px) + 32px) !important;
    
    /* Increased height for iPhone Pro Max */
    height: 84px !important;
    min-height: calc(84px + env(safe-area-inset-bottom, 0px)) !important;
    
    /* Enhanced safe area padding - more aggressive */
    padding-bottom: max(env(safe-area-inset-bottom, 0px), 20px) !important;
    
    /* Force positioning */
    position: fixed !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 1000 !important;
    
    /* SUBTLE GLASSMORPHISM - iOS 17+ Style */
    background: rgba(0, 0, 0, 0.75) !important;
    backdrop-filter: blur(20px) saturate(150%) !important;
    -webkit-backdrop-filter: blur(20px) saturate(150%) !important;
    
    /* Refined border for depth */
    border-top: 0.5px solid rgba(255, 255, 255, 0.12) !important;
    
    /* Subtle shadow system */
    box-shadow: 
      0 -1px 0 rgba(255, 255, 255, 0.08) inset,
      0 -8px 24px rgba(0, 0, 0, 0.3),
      0 -2px 6px rgba(0, 0, 0, 0.15) !important;
    
    /* Ensure visibility */
    opacity: 1 !important;
    visibility: visible !important;
    display: flex !important;
    
    /* Hardware acceleration */
    transform: translateZ(0) !important;
    will-change: auto !important;
  }
}

/* Device-specific refinements */
@media (max-width: 375px) and (-webkit-touch-callout: none) {
  /* iPhone SE / smaller */
  .bottom-nav-container,
  nav[class*="bottom"] {
    height: 64px !important;
    bottom: calc(env(safe-area-inset-bottom, 0px) + 12px) !important;
  }
}

@media (min-width: 431px) and (-webkit-touch-callout: none) {
  /* iPhone Pro Max - ULTRA AGGRESSIVE POSITIONING */
  .bottom-nav-container,
  nav[class*="bottom"] {
    height: 88px !important;
    bottom: calc(env(safe-area-inset-bottom, 0px) + 40px) !important;
    padding-bottom: max(env(safe-area-inset-bottom, 0px), 24px) !important;
  }
}

/* Enhanced button touch targets for iPhone */
@supports (-webkit-touch-callout: none) {
  .bottom-nav-container button,
  .bottom-nav-container a {
    /* iOS-standard touch target */
    min-height: 48px !important;
    min-width: 48px !important;
    padding: 8px 12px !important;
    
    /* Remove conflicting backgrounds */
    background: none !important;
    border: none !important;
    box-shadow: none !important;
    
    /* iOS haptic optimizations */
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: transparent !important;
  }
}

/* Content spacing adjustment for iPhone */
@supports (-webkit-touch-callout: none) {
  .dashboard-safe-content,
  .native-scroll-container,
  main {
    /* Reserve much more space for elevated navigation */
    padding-bottom: calc(120px + env(safe-area-inset-bottom, 0px)) !important;
  }
}

/* Active state with iOS blue */
@supports (-webkit-touch-callout: none) {
  .bottom-nav-container [aria-selected="true"],
  .bottom-nav-container .active {
    color: #0A84FF !important; /* iOS 17 system blue */
  }
  
  .bottom-nav-container [aria-selected="false"],
  .bottom-nav-container button:not(.active) {
    color: rgba(255, 255, 255, 0.65) !important;
  }
}
