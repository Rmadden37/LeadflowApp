/* ===================================================================
   IPHONE BOTTOM NAVIGATION VISIBILITY FIX
   Fixes bottom navigation positioning on iPhone screens
   =================================================================== */

/* iPhone-specific bottom navigation positioning */
@supports (-webkit-touch-callout: none) {
  /* Target ALL possible bottom navigation selectors */
  .bottom-nav-container,
  nav[class*="bottom"],
  [data-testid="bottom-navigation"],
  nav.fixed.bottom-0,
  .fixed.bottom-0[class*="z-"],
  nav:has([class*="bottom-nav"]) {
    /* AGGRESSIVE POSITIONING - Move WAY above home indicator */
    bottom: calc(env(safe-area-inset-bottom, 0px) + 20px) !important;
    
    /* Increase height to compensate for higher positioning */
    height: 80px !important;
    min-height: 80px !important;
    
    /* Add substantial internal padding for safe area */
    padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 16px) !important;
    
    /* Force positioning and visibility */
    position: fixed !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 1001 !important;
    
    /* Ensure visibility above iPhone home indicator */
    transform: translateY(0) !important;
    
    /* iPhone-specific backdrop with high contrast */
    background: rgba(0, 0, 0, 0.95) !important;
    backdrop-filter: blur(30px) saturate(200%) !important;
    -webkit-backdrop-filter: blur(30px) saturate(200%) !important;
    
    /* Ensure it's visible */
    opacity: 1 !important;
    visibility: visible !important;
    display: flex !important;
  }
}

/* iPhone SE and smaller screens */
@media (max-width: 375px) and (-webkit-touch-callout: none) {
  .bottom-nav-container,
  nav[class*="bottom"],
  [data-testid="bottom-navigation"] {
    /* Even smaller height for compact screens */
    height: 58px !important;
    min-height: 58px !important;
    
    /* Compact padding */
    padding: 4px 8px !important;
    padding-bottom: max(env(safe-area-inset-bottom, 0px), 6px) !important;
  }
  
  /* Compact button sizing */
  .bottom-nav-container button,
  .bottom-nav-container a {
    padding: 6px 8px !important;
    font-size: 10px !important;
  }
  
  /* Smaller icons */
  .bottom-nav-container svg {
    width: 20px !important;
    height: 20px !important;
  }
}

/* iPhone 12/13/14/15 (standard) */
@media (min-width: 376px) and (max-width: 430px) and (-webkit-touch-callout: none) {
  .bottom-nav-container,
  nav[class*="bottom"],
  [data-testid="bottom-navigation"] {
    /* Standard iPhone height */
    height: 64px !important;
    min-height: 64px !important;
    
    /* Position above home indicator with extra space */
    bottom: max(env(safe-area-inset-bottom, 0px), 4px) !important;
    padding-bottom: max(env(safe-area-inset-bottom, 0px), 10px) !important;
  }
}

/* iPhone Pro Max and larger */
@media (min-width: 431px) and (-webkit-touch-callout: none) {
  .bottom-nav-container,
  nav[class*="bottom"],
  [data-testid="bottom-navigation"] {
    /* Larger screen height */
    height: 68px !important;
    min-height: 68px !important;
    
    /* Position with comfortable spacing */
    bottom: max(env(safe-area-inset-bottom, 0px), 6px) !important;
    padding-bottom: max(env(safe-area-inset-bottom, 0px), 12px) !important;
  }
}

/* Content spacing adjustments for iPhone */
@supports (-webkit-touch-callout: none) {
  .dashboard-safe-content,
  .native-scroll-container,
  .main-content-with-bottom-nav,
  main {
    /* Reserve proper space for iPhone bottom nav - much more space */
    padding-bottom: calc(100px + env(safe-area-inset-bottom, 0px) + 20px) !important;
  }
  
  /* Target Tailwind CSS classes used by BottomNav component */
  .fixed.bottom-0.left-0.right-0,
  .fixed.bottom-0.z-\\[1000\\] {
    bottom: calc(env(safe-area-inset-bottom, 0px) + 20px) !important;
  }
  
  /* Override pb-safe-bottom utility */
  .pb-safe-bottom {
    padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 24px) !important;
  }
}

/* Debug helper (remove in production) */
/* 
.bottom-nav-container {
  outline: 2px solid lime !important;
  background: rgba(0, 255, 0, 0.3) !important;
}
*/

/* ULTRA-AGGRESSIVE iPhone Bottom Navigation Fix */
@supports (-webkit-touch-callout: none) {
  /* Target by component structure */
  nav[class*="fixed"][class*="bottom-0"] {
    bottom: calc(env(safe-area-inset-bottom, 34px) + 20px) !important;
    height: 80px !important;
    min-height: 80px !important;
    background: rgba(0, 0, 0, 0.95) !important;
  }
  
  /* Target by data attributes if they exist */
  [data-component="bottom-nav"],
  [data-testid*="bottom"],
  [role="tablist"][class*="bottom"] {
    bottom: calc(env(safe-area-inset-bottom, 34px) + 20px) !important;
  }
}
